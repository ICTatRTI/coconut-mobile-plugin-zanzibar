{
  "_id": "Household",
  "collection": "question",
  "couchapp": {},
  "isApplicationDoc": true,
  "action_on_questions_loaded": "window.malariaCase = new Case({caseID: Coconut.questionView.result.get 'MalariaCaseID'});malariaCase.fetch() if malariaCase.caseID",
  "onValidatedComplete": "malariaCase.createNextResult()",
  "questions": [
    {
      "action_on_change": "if (ResultOfQuestion('Malaria Case ID') is null and value is 'Mass Screen') then setValue('Malaria Case ID', moment().format('YYMD') + Math.floor(Math.random()*100000))",
      "label": "Reason for visiting household",
      "radio-options": "Index Case Household, Index Case Neighbors, Mass Screen",
      "type": "radio"
    },
    {
      "label": "Malaria Case ID",
      "type": "text"
    },
    {
      "label": "Head of Household Name",
      "type": "autocomplete from previous entries"
    },
    {
      "autocomplete-options": "window.ShehiaOptions = GeoHierarchy.allUniqueShehiaNames()",
      "label": "Shehia",
      "type": "autocomplete from code",
      "validation": "'Shehia ' + value + ' is not valid. Please try again.' unless _.contains(window.ShehiaOptions, value)"
    },
    {
      "label": "Village",
      "type": "autocomplete from previous entries"
    },
    {
      "label": "Sheha/Mjumbe",
      "type": "autocomplete from previous entries"
    },
    {
      "label": "Contact Mobile # (patient/relative)",
      "type": "text"
    },
    {
      "label": "Household Location",
      "required": "false",
      "type": "location"
    },
    {
      "label": "<span style='background:yellow'>Household in high risk shehia and index case has no travel history, recommend followup at nearby households</span>",
      "skip_logic": "if window.malariaCase then not(window.malariaCase.indexCaseHasNoTravelHistory() and window.malariaCase.highRiskShehia()) else true",
      "type": "label"
    },
    {
      "label": "Followup Neighbors?",
      "radio-options": "Yes,No",
      "type": "radio"
    },
    {
      "label": "Number of other households within 50 steps of index case household",
      "radio-options": "Yes,No",
      "skip_logic": "ResultOfQuestion('Followup Neighbors?') is 'No'",
      "type": "number"
    },
    {
      "label": "Total Number of Residents in the Household",
      "type": "number",
      "validation": "return 'Value must be between 0 and 20' if value < 0 or value > 20"
    },
    {
      "label": "Number of LLIN",
      "type": "number",
      "validation": "return 'Value must be between 0 and 20' if value < 0 or value > 20"
    },
    {
      "label": "Number of Sleeping Places (beds/mattresses)",
      "type": "number",
      "validation": "return 'Value must be between 0 and 20' if value < 0 or value > 20"
    },
    {
      "label": "Have you given coupon(s) for nets",
      "radio-options": "Yes,No",
      "skip_logic": "ResultOfQuestion('Number of LLIN') >= ResultOfQuestion('Number of Sleeping Places (beds/mattresses)')",
      "type": "radio"
    },
    {
      "label": "Coupon Numbers",
      "required": "false",
      "skip_logic": "ResultOfQuestion('Have you given coupon(s) for nets') is null or ResultOfQuestion('Have you given coupon(s) for nets') is 'No' ",
      "type": "text"
    },
    {
      "label": "Number of Household Members with Fever or History of Fever Within Past Week",
      "type": "number",
      "validation": "return 'Value must be between 0 and 20' if value < 0 or value > 20"
    },
    {
      "label": "Number of Household Members Treated for Malaria Within Past Week",
      "type": "number",
      "validation": "return 'Value must be between 0 and 20' if value < 0 or value > 20"
    },
    {
      "label": "Index case: If patient is female 15-45 years of age, is she is pregant?",
      "radio-options": "Yes,No,Unknown,Not Applicable",
      "skip_logic": "ResultOfQuestion('Reason for visiting household') isnt 'Index Case Household'",
      "type": "radio"
    },
    {
      "label": "Index case: Patient's current status",
      "radio-options": "Feeling Better, Feeling Unchanged, Feeling Worse, Admitted, Died ",
      "skip_logic": "ResultOfQuestion('Reason for visiting household') isnt 'Index Case Household'",
      "type": "radio"
    },
    {
      "label": "Index case: Patient's treatment status",
      "radio-options": "Completed, In Progress, Stopped",
      "skip_logic": "ResultOfQuestion('Reason for visiting household') isnt 'Index Case Household'",
      "type": "radio"
    },
    {
      "label": "Index case: Slept under LLIN last night?",
      "radio-options": "Yes,No,Unknown,Not Applicable",
      "skip_logic": "ResultOfQuestion('Reason for visiting household') isnt 'Index Case Household'",
      "type": "radio"
    },
    {
      "action_on_questions_loaded": "convertDayNumbersToDatesRelativeToDiagnosisDate('Index case: Overnight Travel within Zanzibar 10-24 days before positive test result')",
      "label": "Index case: Overnight Travel within Zanzibar 10-24 days before positive test result",
      "radio-options": "Yes,No,Unknown,Not Applicable",
      "skip_logic": "ResultOfQuestion('Reasonforvisitinghousehold') isnt 'Index Case Household'",
      "type": "radio"
    },
    {
      "action_on_questions_loaded": "convertDayNumbersToDatesRelativeToDiagnosisDateAndAddSelector('List all locations of overnight travel within Zanzibar 10-24 days before positive test result')",
      "label": "List all locations of overnight travel within Zanzibar 10-24 days before positive test result",
      "skip_logic": "ResultOfQuestion('IndexcaseOvernightTravelwithinZanzibar1024daysbeforepositivetestresult') isnt 'Yes'",
      "type": "text"
    },
    {
      "label": "Index case: Overnight Travel outside of Zanzibar in the past year?",
      "radio-options": "Yes,No,Unknown,Not Applicable",
      "skip_logic": "ResultOfQuestion('Reasonforvisitinghousehold') isnt 'Index Case Household'",
      "type": "radio"
    },
    {
      "action_on_questions_loaded": "convertDayNumbersToDatesRelativeToDiagnosisDateAndAddSelector('All locations and entry points from overnight travel outside Zanzibar 0-7 days before positive test result')",
      "label": "All locations and entry points from overnight travel outside Zanzibar 0-7 days before positive test result",
      "required": false,
      "skip_logic": "ResultOfQuestion('IndexcaseOvernightTraveloutsideofZanzibarinthepastyear') isnt 'Yes'",
      "type": "text"
    },
    {
      "action_on_questions_loaded": "convertDayNumbersToDatesRelativeToDiagnosisDateAndAddSelector('All locations and entry points from overnight travel outside Zanzibar 8-14 days before positive test result')",
      "label": "All locations and entry points from overnight travel outside Zanzibar 8-14 days before positive test result",
      "required": false,
      "skip_logic": "ResultOfQuestion('IndexcaseOvernightTraveloutsideofZanzibarinthepastyear') isnt 'Yes'",
      "type": "text"
    },
    {
      "action_on_questions_loaded": "convertDayNumbersToDatesRelativeToDiagnosisDateAndAddSelector('All locations and entry points from overnight travel outside Zanzibar 15-21 days before positive test result')",
      "label": "All locations and entry points from overnight travel outside Zanzibar 15-21 days before positive test result",
      "required": false,
      "skip_logic": "ResultOfQuestion('IndexcaseOvernightTraveloutsideofZanzibarinthepastyear') isnt 'Yes'",
      "type": "text"
    },
    {
      "action_on_questions_loaded": "convertDayNumbersToDatesRelativeToDiagnosisDateAndAddSelector('All locations and entry points from overnight travel outside Zanzibar 22-42 days before positive test result')",
      "label": "All locations and entry points from overnight travel outside Zanzibar 22-42 days before positive test result",
      "required": false,
      "skip_logic": "ResultOfQuestion('IndexcaseOvernightTraveloutsideofZanzibarinthepastyear') isnt 'Yes'",
      "type": "text"
    },
    {
      "_id": "8739",
      "action_on_questions_loaded": "convertDayNumbersToDatesRelativeToDiagnosisDateAndAddSelector('All locations and entry points from overnight travel outside Zanzibar 43-365 days before positive test result')",
      "id": "8739",
      "label": "All locations and entry points from overnight travel outside Zanzibar 43-365 days before positive test result",
      "required": false,
      "skip_logic": "ResultOfQuestion('IndexcaseOvernightTraveloutsideofZanzibarinthepastyear') isnt 'Yes'",
      "type": "text"
    },
    {
      "label": "Last date of IRS",
      "required": false,
      "type": "date"
    },
    {
      "label": "complete",
      "type": "checkbox"
    }
  ],
  "resultSummaryFields": {
    "Head Of Household Name": "on",
    "Malaria Case ID": "on",
    "Total Number Of Residents In The Household": "on"
  }
}
